![GitHub Logo](https://defdev.eu/ddf/gfx/logo.defdev.1608z.whtonblk.svg)
# Demo4: Dependency-check and Defect-dojo

Run the sonar-scanner container from the defdev docker registry ("defdev/sonar-scanner"). 
In the pipe-line-script file there is already a great part of the Jenkinsfile and how the container should run pre-defined.
However, in this demo we have to find out how to effectively run the Docker container.

To get this demo up and running we first have to do some configuration in sonarqube. Amongst others we should get the API key and make our own projects with the keys so we can utilize them to push the metrics that are generated by the sonar-scanner.

### Dockerfile

    FROM openjdk:8

    LABEL maintainer="Ryan Mitchell <mitch@ryansmitchell.com>"

    RUN apt-get update
    RUN apt-get install -y curl git tmux htop maven

    # Set timezone to CST
    ENV TZ=America/Chicago
    RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone

    WORKDIR /root

    RUN git clone https://github.com/blabla1337/skf-flask

    RUN curl --insecure -o ./sonarscanner.zip -L https://sonarsource.bintray.com/Distribution/sonar-scanner-cli/sonar-scanner-cli-3.0.3.778-linux.zip
    RUN unzip sonarscanner.zip
    RUN rm sonarscanner.zip

    ENV SONAR_RUNNER_HOME=/root/sonar-scanner-3.0.3.778-linux
    ENV PATH $PATH:/root/sonar-scanner-3.0.3.778-linux/bin

    COPY sonar-runner.properties ./sonar-scanner-3.0.3.778-linux/conf/sonar-scanner.properties

    # Use bash if you want to run the environment from inside the shell, otherwise use the command that actually runs the underlying stuff
    #CMD /bin/bash
    CMD sonar-scanner -Dsonar.projectBaseDir=./src

##### Notice the run command for the git clone

Try to run the sonar-scanner tests against the python part of the project!
